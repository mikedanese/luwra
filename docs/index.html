<!-- HTML header for doxygen 1.8.10-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.9.1"/>
		<title>Luwra: Main Page</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
		<div id="top">
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Luwra Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://gitter.im/vapourismo/luwra">![Gitter](https://badges.gitter.im/Join%20Chat.svg)</a> <a href="https://travis-ci.org/vapourismo/luwra">![Build Status](https://travis-ci.org/vapourismo/luwra.svg?branch=master)</a> </p><h1>Luwra</h1>
<p>A header-only C++ library which provides a Lua wrapper with minimal overhead.</p>
<h2>Usage</h2>
<p>Refer to the <a href="https://github.com/vapourismo/luwra/wiki">wiki pages</a> or the <a href="http://vapourismo.github.io/luwra/docs">documentation</a>. In order to use the library you must clone this repository and include <code>lib/luwra.hpp</code>.</p>
<p>Have a question? Simply <a href="https://gitter.im/vapourismo/luwra">ask</a> or open an issue.</p>
<h2>Examples</h2>
<p>In the following examples <code>lua</code> refers to an instance of <code>lua_State*</code>.</p>
<p>Easily push values onto the stack:</p>
<p>```c++ // Push an integer luwra::push(lua, 1338);</p>
<p>// Push a number <a class="el" href="namespaceluwra.html#aea810b95188ea7c77744551aed2858fd">luwra::push</a>(lua, 13.37);</p>
<p>// Push a boolean luwra::push(lua, false);</p>
<p>// Push a string <a class="el" href="namespaceluwra.html#aea810b95188ea7c77744551aed2858fd">luwra::push</a>(lua, "Hello World"); ```</p>
<p>Or retrieve them:</p>
<p>```c++ // Your function int my_fun(int a, int b) { return a + b; }</p>
<p>// Prepare stack luwra::push(lua, 13); luwra::push(lua, 37);</p>
<p>// Apply your function int result = luwra::apply(lua, my_fun);</p>
<p>// which is equivalent to int result = luwra::apply(lua, 1, my_fun);</p>
<p>// and equivalent to int result = <a class="el" href="namespaceluwra.html#a839077ddd9c3d0565a40c574bc8e9555">luwra::apply</a>(lua, -2, my_fun);</p>
<p>// All of this is essentially syntactic sugar for int result = my_fun(luwra::read&lt;int&gt;(lua, 1), luwra::read&lt;int&gt;(lua, 2)); ```</p>
<p>Generate a C function which can be used by Lua:</p>
<p>```c++ // Assuming your function looks something like this int my_function(const char* a, int b) { // ... }</p>
<p>// Convert to lua_CFunction lua_CFunction cfun = LUWRA_WRAP(my_function);</p>
<p>// Do something with it, for example set it as a Lua global function <a class="el" href="namespaceluwra.html#afed27900ff117638937ad92e0217258d">luwra::setGlobal</a>(lua, "my_function", cfun); ```</p>
<p>```lua &ndash; Invoke the registered function local my_result = my_function("Hello World", 1337) print(my_result) ```</p>
<p>Or register your own class:</p>
<p>```c++ struct Point { double x, y;</p>
<p>Point(double x, double y): x(x), y(y) { std::cout &lt;&lt; "Construct Point(" &lt;&lt; x &lt;&lt; ", " &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl; }</p>
<p>~Point() { std::cout &lt;&lt; "Destruct Point(" &lt;&lt; x &lt;&lt; ", " &lt;&lt; y &lt;&lt; ")" &lt;&lt; std::endl; }</p>
<p>void scale(double f) { x *= f; y *= f; }</p>
<p>std::string __tostring() { return "&lt;Point(" + std::to_string(x) + ", " + std::to_string(y) + ")&gt;"; } };</p>
<p>// Register the metatable and constructor <a class="el" href="namespaceluwra.html#a0a744cd63bf0d4f611a62b8a56df714e">luwra::registerUserType&lt;Point(double, double)&gt;</a>( lua,</p>
<p>// Constructor name "Point",</p>
<p>// Methods need to be declared here { LUWRA_MEMBER(Point, scale), LUWRA_MEMBER(Point, x), LUWRA_MEMBER(Point, y) },</p>
<p>// Meta methods may be registered aswell { LUWRA_MEMBER(Point, __tostring) } ); ```</p>
<p>```lua &ndash; Instantiate 'Point' local point = Point(13, 37)</p>
<p>&ndash; Invoke 'scale' method point:scale(1.5)</p>
<p>&ndash; Convert to string via '__tostring' meta method print(point)</p>
<p>&ndash; Read properties 'x' and 'y' print(point:x(), point:y())</p>
<p>&ndash; Set property 'x' point:x(4.2) ```</p>
<h2>Requirements</h2>
<p>You need a C++11-compliant compiler and at least Lua 5.1 to get this library to work. I recommend using Lua 5.3 or later, to avoid the messy <code>lua_Integer</code> situation. LuaJIT 2.0 seems to work, apart from user types, which fail for yet unknown reasons.</p>
<h2>Tests</h2>
<p>The attached GNU <code>Makefile</code> allows you to run both examples and tests using <code>make examples</code> and <code>make test</code> respectively. You might need to adjust <code>LUA_*</code> variables, so Luwra finds the Lua headers and library.</p>
<p>Assuming all headers are located in <code>/usr/include/lua5.3</code> and the shared object name is <code>liblua5.3.so</code>, you need to invoke this:</p>
<p>``` make LUA_INCDIR=/usr/include/lua5.3 LUA_LIBNAME=lua5.3 test ``` </p>
</div></div><!-- contents -->
	</body>
</html>
